/*! YOURLS API v3.0.0 | (C) 2017 Alasdair Mercer | MIT License */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("yourls-api",e):t.yourls=e()}(this,function(){"use strict";function t(t,e,n){if(null!=e){n=u.call(arguments,2);for(var r,o,i=0,a=n.length;i<a;i++){o=n[i];for(r in o)t&&!s.call(o,r)||(e[r]=o[r])}}}function e(e,n){var r;return"function"==typeof Object.create?r=Object.create(e):(i.prototype=e,r=new i,i.prototype=null),n&&t(!0,r,n),r}function n(){}function r(t,e){e=Array.prototype.slice.call(arguments,1);for(var n,r,o=0,i=e.length;o<i;o++)if(r=e[o])for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);return t}function o(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}var i=function(){},s=Object.prototype.hasOwnProperty,u=Array.prototype.slice;n.extend=function(n,r,o){var i=this;return"function"!=typeof n&&(o=r,r=n,n=function(){return i.apply(this,arguments)}),t(!1,n,i,o),n.prototype=e(i.prototype,r),n.prototype.constructor=n,n.super_=i,n};var a=n.extend(function(t,e,n){this.url=t?t.replace(/\/$/,""):"",this.credentials=a._sanitizeCredentials(e),this.options=a._sanitizeOptions(n)},null,{instance:null,_sanitizeCredentials:function(t){if(!t)return null;var e={};return t.signature?(e.signature=t.signature,e.timestamp=t.timestamp):(e.password=t.password,e.username=t.username),e},_sanitizeOptions:function(t){null==t&&(t={});var e={format:"json"};return t.format&&(e.format=t.format.toLowerCase()),t.method?e.method=t.method.toUpperCase():e.method="json"===e.format?"POST":"GET",e}}),l=n.extend({buildBody:function(t,e){return r({format:t.options.format},t.credentials,e)},getSupportedHttpMethods:function(){return null},isMethodSupported:function(t){var e=this.getSupportedHttpMethods();return e&&e.indexOf(t)!==-1},isQueryStringRequired:function(t){return"GET"===t},process:function(t,e,n,r){},send:function(t,e,n){var r=a.instance,o=l._serializeParameters(this.buildBody(r,t)),i=r.options.method,s=r.url;this.isQueryStringRequired(i)&&(s+="?"+o,o=null),this.process(i,s,o,function(t){n(l._extractResult(e,t),t)})}},{_extractResult:function(t,e){t=o(t)?t:[t];var n,r,i=null;if(!e)return i;if(1===t.length)i=e[t[0]];else for(i={},n=0;n<t.length;n++)r=t[n],void 0!==e[r]&&(i[r]=e[r]);return i},_serializeParameters:function(t){if(!t)return"";var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&null!=t[n]&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")}}),c=l.extend({getSupportedHttpMethods:function(){return["GET","POST"]},process:function(t,e,n,r){var o=new XMLHttpRequest;o.open(t,e,!0),o.onreadystatechange=function(){var t;if(4===o.readyState)try{t=JSON.parse(o.responseText),r(t)}catch(t){throw new Error("Unable to parse response: "+t)}},o.setRequestHeader("X-Requested-With","XMLHttpRequest"),null!=n&&o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(n)}}),d=(new Date).getTime(),p=l.extend(function(){p.super_.call(this),window[p._callbackHolderKey]||(window[p._callbackHolderKey]=p._callbackHolder),this._id=p._generateId()},{getSupportedHttpMethods:function(){return["GET"]},buildBody:function(t,e){var n=p.super_.prototype.buildBody.call(this,t,e);return n.callback=p._callbackHolderKey+"["+this._id+"]",n},process:function(t,e,n,r){var o=document.createElement("script"),i=this;p._callbackHolder[this._id]=function(t){delete p._callbackHolder[i._id],o.parentNode.removeChild(o),r(t)},o.setAttribute("src",e),document.getElementsByTagName("head")[0].appendChild(o)}},{_callbackHolderKey:"__yourls"+d+"_jsonp",_callbackHolder:{},_generateId:function(){do{d++}while(p._callbackHolder[d]);return d}}),f=n.extend({sendRequest:function(t,e,n){var r=a.instance;if(!r)throw new Error("No connection has been made");var o=r.options.format,i=r.options.method,s=f._requestFormatMap[o];if(!s)throw new Error("Request format not supported: "+o);var u=new s;if(!u.isMethodSupported(i))throw new Error("HTTP method not supported: "+i);u.send(t,e,n)}},{_requestFormatMap:{json:c,jsonp:p}}),h=f.extend({stats:function(t){var e={action:"db-stats"};return this.sendRequest(e,"db-stats",t),this}}),y=f.extend(function(t){y.super_.call(this),this.url=t});y.prototype.expand=function(t){var e={action:"expand",shorturl:this.url};return this.sendRequest(e,["keyword","longurl","shorturl"],t),this},y.prototype.stats=function(t){var e={action:"url-stats",shorturl:this.url};return this.sendRequest(e,"link",t),this};var m=f.extend(function(){m.super_.call(this),this.db=new h,this.VERSION="3.0.0"},{connect:function(t,e,n){return a.instance=new a(t,e,n),this},disconnect:function(){return a.instance=null,this},shorten:function(t,e,n){var r={action:"shorturl",url:t};switch(typeof e){case"function":n=e,e=null;break;case"string":e={keyword:e}}return e&&(r.keyword=e.keyword,r.title=e.title),this.sendRequest(r,["shorturl","title","url"],n),this},stats:function(t,e){var n={action:"stats"};switch(typeof t){case"function":e=t,t=null;break;case"number":t={limit:t}}return t&&(n.filter=t.filter,n.limit=t.limit,n.start=t.start),this.sendRequest(n,["links","stats"],function(t,n){e(m._sanitizeStatsResult(t),n)}),this},url:function(t){return t?new y(t):null},version:function(t,e){var n={action:"version"};return"function"==typeof t&&(e=t,t=null),null!=t&&(n.db=Number(t)),this.sendRequest(n,["db_version","version"],e),this}},{_sanitizeStatsResult:function(t){if(!t||!t.links||o(t.links))return t;for(var e,n=1,r=[];null!=(e=t.links["link_"+n]);)r.push(e),n++;return t.links=r,t}});return new m});

//# sourceMappingURL=yourls.min.js.map